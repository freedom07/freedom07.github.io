---
title:  "파이썬 클린코드 Chapter1(쓰는 중)"
excerpt: "좋은 코드의 일반적인 특징"
categories:
  - python
tags:
  - 파이썬
---





> 물론 API를 디자인할 때 예상되는 입력, 출력 및 부작용을 문서화해야한다. 그러나 문서화가 런타임 시의 소프트웨어의 동작까지 강제할 수는 없다. 이러한 규칙, 즉 코드가 정상적으로 동작하기 위해 기대하는 것과 호출자가 반환 받기를 기대하는 것은 디자인의 하나가 되어야 한다. 여기서 계약(contract)이라는 개념이 생긴다.



계약에 의한 디자인(Design by Contract)



사전조건은 함수나 메소드가 제대로 동작하기 위해 보장해야 하는 모든 것을 말한다. 프로그래밍에서 많이 사용되는 일반적인 용어로 적절한 데이터를 전달하는 것이다. 특히 파이썬은 동적으로 타입이 결정되므로 전달된 데이터가 적절한 타입인지 확인하는 경우도있다. 이것은 mypy가 하는 타입 체킹과 다르다. 그것보다는 필요로하는 값이 정확한지 확인하는 것에 가깝다.



유효성 검사

- 클라이언트가 함수를 호출하기전에 모든 유효성검사를 할 것 -> tolerant (관용적인) 접근
- 함수가 자체적으로 로직을 실행하기 전에 검사하도록 할 것 -> demanding (까다로운) 접근



어떤 방식을 택하든 중복 제거 원칙을 항상 마음속에 간직해야한다. 중복 제거 원칙은 사전 조건 검증을 양쪽에서 하지 말고 오직 어느 한쪽에서만 해야한다는 것이다. 즉, 검증 로직을 클라이언트에 두거나 함수 자체에 두어야한다. 이것은 뒤쪽에서 다룰 DRY 원칙과 관련이있다.



파이썬스러운 계약을 적용하는 가장 좋은 방법은 메소드, 함수 및 클래스에 RuntimeError 예외 또는 ValueError예외를 발생시키는 제어 메커니즘을 추가하는 것이다. 일반적인 예외 규칙을 만드는 것은 어플리케이션에 종속적인 부분이 많으므로 앞으로 언급한 예외는 가장 일반적인 예외이지만 문제를 정확하기 특정하기 어려우면 사용자 정의 예외를 만드는 것이 가장 좋다.

또한 코드를 가능한 격리된 상태로 유지하는 것이 좋다. 즉 사전조건, 사후조건에 대한 검사 그리고 핵심 기능에 대한 구현을 구분하는 것이 좋다



디자인 원칙의 주된 가치는 문제가 있는 부분을 효과적으로 식별하는데 있다.



올바른 수준의 추상화 단계에서 예외처리

예외는 오직 한가지 일을 하는 함수의 한 부분이어야 한다. 함수가 처리하는 (또는 발생시키는) 예외는 캡슐화된 로직과 일치해야한다.



경험상 잘 정의된 소프트웨어는 높은 응집력과 낮은 결합력을 갖는다(high cohesion and low coupling)



DRY (Do not Repeat Yourself)

OAOO(Once and Only Once)

자명한 원리로서 중복을 반드시 피해야한다. 코드에 있는 지식은 단 한번, 단 한 곳에 정의되어야한다. 코드를 변경하려고 할 때 수정이 필요한 곳은 단 한군데만 있어야한다. 그렇지 않다는 것은 잘못된 시스템의 징조이다. 



코드 중복을 제거할 수 있는 방법

- 한수 생성 기법
- 전체적으로 추상화를 하지 않은 경우 완전히 새로운 객체를 만드는 것이 좋다.
- 어떤 경우는 컨텍스트 관리자를 사용하여 중복을 제거할 수 있다.
- 이터레이터나 제너레이터가 코드의 반복을 피하는데 도움이 될 수 있다
- 5장의 코드 개선을 위한 데코레이터에서 설명하는 데코레이터가 도움이 될 수도 있다.



YAGNI(You Ain't Gonna Need it)

유지보수가 가능한 소프트웨어를 만드는 것은 미래의 요구사항을 예측하는 것이 아니다. 오직 현재의 요구사항을 잘 해결하기 위한 소프트웨어를 작성하고 가능한 나중에 수정하기 쉽도록 작성하는 것이다. 다시 말해 디자인을 할 때 내린 결정으로 특별한 제약 없이 개발을 계속 할 수 있다면 굳이 필요없는 추가 개발을 하지 말라는 것이다.



KIS(Keep It Simple)

위랑 비슷하게 과잉 엔지니어링을 피해야한다. 문제를 올바르게 해결하는 최소한의 기능을 구현하고 필요한 것 이상으로 솔루션을 복잡하게 만들지 않도록 해야한다. 기억해야할 점은 디자인이 단순할 수록 유지 관리가 쉽다는 것이다.



























